name: AWSCostPredict
on:
  push:
    branches: [ "main" ]
    
jobs:
  AWSCostPredict:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2
        
      - name: Predict cost
        uses: ./ # Uses an action in the root directory
        # or use a released Github Action
        # uses: repo url
        with:
          iac_path: IAC
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        continue-on-error: true
          
      - name: debug tfplan
        run: |
         cat "${{ github.workspace }}/IAC/tfplan.json"
        shell: bash
        continue-on-error: true
